{% extends 'base.html.twig' %}

{% block title %}Projects{% endblock %}
{% block page_styles %}
    <style>
        .list-group-item {
            cursor: pointer;

        }

        .list-group-item:hover {
            background-color: #f5f5f5;
        }

        .list-group-item:active {
            background-color: #e5e5e5;
        }
    </style>
{% endblock %}
{% block body %}
    <div class="container w-75">
        <div class="row">
            <div class="col">
                <h1 class="mb-4">Projects</h1>
            </div>
            <div class="col">
                <a href="{{ path('add_project') }}" class="btn btn-primary float-end">Create Project</a>
            </div>
        </div>
        {#  if projects is empty show no projects to display #}
        {% if projects is empty %}
            <p>No projects to display</p>
        {% else %}
            <h3 class="mb-3">Active Projects</h3>
            <ol class="list-group list-group-numbered mb-3">
                {% for project in projects %}
                    {% if project.active %}
                        <li class="list-group-item d-flex justify-content-between align-items-start"
                            go_to="{{ path('show_task_per_project',{'id': project.id }) }}">
                            <div class="ms-2 me-auto">
                                <div class="fw-bold">{{ project.name }}</div>
                                <div class="text-muted">{{ project.breif|default('No description') }}</div>
                            </div>

                            <span class="badge bg-primary rounded-pill align-self-center">{{ project.tasks.count }}</span>
                        </li>
                    {% endif %}
                {% endfor %}
            </ol>
            <h3 class="mb-3">Inactive Projects</h3>
            <ol class="list-group list-group-numbered mb-3">
                {% for project in projects %}
                    {% if not project.active %}
                        <li class="list-group-item d-flex justify-content-between align-items-start text-muted"
                            go_to="{{ path('show_task_per_project',{'id': project.id }) }}">
                            <div class="ms-2 me-auto">
                                <div class="fw-bold">{{ project.name }}</div>
                                <div class="text-muted">{{ project.breif|default('No description') }}</div>
                            </div>

                            <span class="badge bg-warning rounded-pill align-self-center">{{ project.tasks.count }}</span>
                        </li>
                    {% endif %}
                {% endfor %}
            </ol>
        {% endif %}
    </div>
{% endblock %}


{% block page_scripts %}
    <script>
        $(document).ready(function () {
            $('.list-group-item').click(function () {
                console.log($(this).attr('go_to'));
                window.location.href = $(this).attr('go_to');
            });
        });
    </script>
{% endblock %}